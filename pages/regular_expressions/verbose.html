
<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" >
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>7.5.Â Verbose Regular Expressions</title>
        <link rev="made" href="josh@servercobra.com" />
        <meta name="generator" content="convert_to_jinja2.py" />
        <meta name="keywords" content="Python, Dive Into Python, tutorial, object-oriented, programming, documentation, book, free" />
        <meta name="description" content="Python from novice to pro" />
        <link rel="home" href="http://www.diveintopython.net/" title="Dive Into Python" />
        
    
    <link rel="up" href="index.html" title=" Chapter7.Regular Expressions" />
    
    
    
    <link rel="next" href="phone_numbers.html" title=" 7.6.Case study: Parsing Phone Numbers" />
    

        <link rel="stylesheet" href="../css/normalize.css">
        <link rel="stylesheet" href="../css/foundation.css">
        <link rel="stylesheet" href="../css/diveintopython.css" type="text/css" />
        <script src="../js/modernizr.js"></script>
    </head>
    <body>
        <div class="row">
            <div class="small-12 columns" id="Header">
                <div class="row">
                    <div class="small-11 columns">
                        
    
    <td align="left" colspan="5" id="breadcrumb" valign="top">You are here: <a href="../index.html">Home</a>&#160;&gt;&#160;<a href="../toc/index.html">Dive Into Python</a>&#160;&gt;&#160;<a href="index.html">Regular Expressions</a>&#160;&gt;&#160;<span class="thispage">Verbose Regular Expressions</span></td>
    

                    </div>
                    <div class="small-1 columns">
                        
    <td align="right" id="navigation" valign="top">&#160;&#160;&#160;<a href="n_m_syntax.html" title="Prev: &#8220;Using the {n,m} Syntax&#8221;">&lt;&lt;</a>&#160;&#160;&#160;<a href="phone_numbers.html" title="Next: &#8220;Case study: Parsing Phone Numbers&#8221;">&gt;&gt;</a></td>

                    </div>
                </div>

                <div id="logocontainer">
                    <h1 id="logo"><a href="http://www.diveintopython.net/index.html" accesskey="1">Dive Into Python</a></h1>
                    <p id="tagline">Python from novice to pro</p>
                    <a href="http://www.amazon.com/gp/product/B001GIOFN8/ref=as_li_tf_tl?ie=UTF8&tag=diveintopython-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=B001GIOFN8"><img src="../images/amazon-buy-button.gif"></a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
                
    

            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
                
    

            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
                
    

            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
                
    <div class="section" lang="en">
<div class="titlepage">
<div>
<div>
<h2 class="title"><a name="re.verbose"></a>7.5.&#160;Verbose Regular Expressions
                  </h2>
</div>
</div>
<div></div>
</div>
<div class="abstract">
<p>So far you've just been dealing with what I'll call &#8220;<span class="quote">compact</span>&#8221; regular expressions.  As you've seen, they are difficult to read, and even if you figure out what one does, that's no guarantee
               that you'll be able to understand it six months later.  What you really need is inline documentation.
            </p>
</div>
<p><span class="application">Python</span> allows you to do this with something called <span class="emphasis"><em>verbose regular expressions</em></span>.  A verbose regular expression is different from a compact regular expression in two ways:
         </p>
<div class="itemizedlist">
<ul>
<li>Whitespace is ignored.  Spaces, tabs, and carriage returns are not matched as spaces, tabs, and carriage returns.  They're
                  not matched at all.  (If you want to match a space in a verbose regular expression, you'll need to escape it by putting a
                  backslash in front of it.)
               </li>
<li>Comments are ignored.  A comment in a verbose regular expression is just like a comment in Python code: it starts with a <tt class="literal">#</tt> character and goes until the end of the line.  In this case it's a comment within a multi-line string instead of within your
                  source code, but it works the same way.
               </li>
</ul>
</div>
<p>This will be more clear with an example.  Let's revisit the compact regular expression you've been working with, and make
            it a verbose regular expression.  This example shows how.
         </p>
<div class="example"><a name="d0e18777"></a><h3 class="title">Example&#160;7.9.&#160;Regular Expressions with Inline Comments</h3><pre class="screen">
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">pattern = <span class="pystring">"""
    ^                   # beginning of string
    M{0,4}              # thousands - 0 to 4 M's
    (CM|CD|D?C{0,3})    # hundreds - 900 (CM), 400 (CD), 0-300 (0 to 3 C's),
                        #            or 500-800 (D, followed by 0 to 3 C's)
    (XC|XL|L?X{0,3})    # tens - 90 (XC), 40 (XL), 0-30 (0 to 3 X's),
                        #        or 50-80 (L, followed by 0 to 3 X's)
    (IX|IV|V?I{0,3})    # ones - 9 (IX), 4 (IV), 0-3 (0 to 3 I's),
                        #        or 5-8 (V, followed by 0 to 3 I's)
    $                   # end of string
    """</span></span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">re.search(pattern, <span class="pystring">'M'</span>, re.VERBOSE)</span>                <a name="re.verbose.1.1"></a><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12">
<span class="computeroutput">&lt;_sre.SRE_Match object at 0x008EEB48&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">re.search(pattern, <span class="pystring">'MCMLXXXIX'</span>, re.VERBOSE)</span>        <a name="re.verbose.1.2"></a><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12">
<span class="computeroutput">&lt;_sre.SRE_Match object at 0x008EEB48&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">re.search(pattern, <span class="pystring">'MMMMDCCCLXXXVIII'</span>, re.VERBOSE)</span> <a name="re.verbose.1.3"></a><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12">
<span class="computeroutput">&lt;_sre.SRE_Match object at 0x008EEB48&gt;</span>
<tt class="prompt">&gt;&gt;&gt; </tt><span class="userinput">re.search(pattern, <span class="pystring">'M'</span>)</span>                            <a name="re.verbose.1.4"></a><img alt="4" border="0" height="12" src="../images/callouts/4.png" width="12">
</img></img></img></img></pre><div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="12"><a href="#re.verbose.1.1"><img alt="1" border="0" height="12" src="../images/callouts/1.png" width="12"/></a>
</td>
<td align="left" valign="top">The most important thing to remember when using verbose regular expressions is that you need to pass an extra argument when
                        working with them: <tt class="literal">re.VERBOSE</tt> is a constant defined in the <tt class="filename">re</tt> module that signals that the pattern should be treated as a verbose regular expression.  As you can see, this pattern has
                        quite a bit of whitespace (all of which is ignored), and several comments (all of which are ignored).  Once you ignore the
                        whitespace and the comments, this is exactly the same regular expression as you saw in <a href="n_m_syntax.html" title="7.4.&#160;Using the {n,m} Syntax">the previous section</a>, but it's a lot more readable.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#re.verbose.1.2"><img alt="2" border="0" height="12" src="../images/callouts/2.png" width="12"/></a>
</td>
<td align="left" valign="top">This matches the start of the string, then one of a possible four <tt class="literal">M</tt>, then <tt class="literal">CM</tt>, then <tt class="literal">L</tt> and three of a possible three <tt class="literal">X</tt>, then <tt class="literal">IX</tt>, then the end of the string.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#re.verbose.1.3"><img alt="3" border="0" height="12" src="../images/callouts/3.png" width="12"/></a>
</td>
<td align="left" valign="top">This matches the start of the string, then four of a possible four <tt class="literal">M</tt>, then <tt class="literal">D</tt> and three of a possible three <tt class="literal">C</tt>, then <tt class="literal">L</tt> and three of a possible three <tt class="literal">X</tt>, then <tt class="literal">V</tt> and three of a possible three <tt class="literal">I</tt>, then the end of the string.
                     </td>
</tr>
<tr>
<td align="left" valign="top" width="12"><a href="#re.verbose.1.4"><img alt="4" border="0" height="12" src="../images/callouts/4.png" width="12"/></a>
</td>
<td align="left" valign="top">This does not match.  Why?  Because it doesn't have the <tt class="literal">re.VERBOSE</tt> flag, so the <tt class="function">re.search</tt> function is treating the pattern as a compact regular expression, with significant whitespace and literal hash marks.  <span class="application">Python</span> can't auto-detect whether a regular expression is verbose or not.  <span class="application">Python</span> assumes every regular expression is compact unless you explicitly state that it is verbose.
                     </td>
</tr>
</table>
</div>
</div>
</div>

            </div>
        </div>
        <div class="row">
            <div class="small-12 columns">
        
    <table border="0" cellpadding="0" cellspacing="0" class="Footer" summary="" width="100%">
<tr>
<td align="left" width="35%"><br><a class="NavigationArrow" href="n_m_syntax.html">&lt;&lt;&#160;Using the {n,m} Syntax</a></br></td>
<td align="center" width="30%"><br>&#160;<span class="divider">|</span>&#160;<a href="index.html#re.intro" title="7.1.&#160;Diving In">1</a> <span class="divider">|</span> <a href="street_addresses.html" title="7.2.&#160;Case Study: Street Addresses">2</a> <span class="divider">|</span> <a href="roman_numerals.html" title="7.3.&#160;Case Study: Roman Numerals">3</a> <span class="divider">|</span> <a href="n_m_syntax.html" title="7.4.&#160;Using the {n,m} Syntax">4</a> <span class="divider">|</span> <span class="thispage">5</span> <span class="divider">|</span> <a href="phone_numbers.html" title="7.6.&#160;Case study: Parsing Phone Numbers">6</a> <span class="divider">|</span> <a href="summary.html" title="7.7.&#160;Summary">7</a>&#160;<span class="divider">|</span>&#160;
            </br></td>
<td align="right" width="35%"><br><a class="NavigationArrow" href="phone_numbers.html">Case study: Parsing Phone Numbers&#160;&gt;&gt;</a></br></td>
</tr>
<tr>
<td colspan="3"><br/></td>
</tr>
</table>

        <!-- Footer -->
<div class="Footer">
    <p><a href="https://github.com/pcsforeducation/diveintopython/issues?sort=created&state=open">Report issues<img style="margin-left:10px" height="40" src="../images/logo_github.png"></a></p>
    <p class="copyright">Copyright &copy; 2000, 2001, 2002, 2003, 2004 <a href="mailto:josh@servercobra.com">Mark Pilgrim</a>. Maintained by Josh Gachnang.</p>
</div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-1879314568120827";
/* DiveIntoPython */
google_ad_slot = "8002881514";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<!-- End Footer -->
            </div>
        </div>
        <!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-9740779-18']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Google Analytics -->
        <script src="../js/jquery.js"></script>
        <script src="../js/foundation.min.js"></script>
        <script>
          $(document).foundation();
        </script>
    </body>
</html>